@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer;
@using System.Globalization
@using Contracts.SharedDtos;
@using ThirdParty
@using ThirdParty.ViewModels

@{
    ViewData["Title"] = "Home";


}
@section HomeStyle {
    <link href="~/css/Home.css" rel="stylesheet" />
}
<div class="main-container container">
    <nav class="sidebar">
        <a asp-action="GetCategory" asp-controller="Home">Category</a>
        <div class="cagtogry-bar">
            @foreach (var category in ViewBag.Catgory as List<CategoryDto>)
            {
                <div class="category-item">
                    <a asp-controller="Product"
                       asp-action="ProductsToCategory"
                       asp-route-categoryName="@category.Name"
                       asp-route-categoryId="@category.Id"
                       class="category-button">
                        @if (CultureInfo.CurrentCulture.Name == "ar")
                        {
                            @category.NameAr
                        }
                        else
                        {
                            @category.Name
                        }

                        <span class="arrow">›</span>
                    </a>
                    <div class="dropdown-content @(CultureInfo.CurrentCulture.Name == "ar"?"Arbic":"")">
                        <div class="drop-group">
                            @foreach (var sub in category.SubCategories)
                            {
                                <div class="group">
                                    <h3>
                                        @if (CultureInfo.CurrentCulture.Name == "ar")
                                        {
                                            @sub.NameAr

                                        }
                                        else
                                        {
                                            @sub.Name
                                        }

                                    </h3>
                                    @foreach (var sub2 in sub.SubCategories)
                                    {
                                        <a asp-controller="Product"
                                           asp-action="ProductsToCategory"
                                           asp-route-categoryName="@sub.Name"
                                           asp-route-categoryId="@sub.Id" class="dropdown-item">
                                            @if (CultureInfo.CurrentCulture.Name == "ar")
                                            {
                                                @sub2.NameAr

                                            }
                                            else
                                            {
                                                @sub2.Name
                                            }
                                        </a>
                                    }
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </nav>
</div>


<script>
    let category = @Html.Raw(Json.Serialize(ViewBag.Catgory));
    if (category == null) {
        console.log("Category is null");
    } else {
        console.log(category);
    }
</script>
